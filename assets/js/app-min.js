function equals(c,a){return OPS[calc.operator](Number(c),Number(a))}function updater(c){calc[calc.current]||"."!==c||(c="0."),calc.equalsVal&&(calc[calc.current]="",calc.equalsVal=0),calc[calc.current]+=c,screenVal(calc[calc.current])}function negator(c){return"0"!==c&&""!==c&&(c=-1===c.indexOf("-")?"-"+c:c.replace("-",""),screenVal(c)),c}function screenVal(c){c=lengthCheck(c),$(".screen").text(c)}function lengthCheck(c){return c.length>3&&(c=commas(c)),c}function clear(){$(".ac-btn").text("AC"),calc.valB?calc.valB="":reset(""),screenVal("0")}function commas(c){var a=/(\d)(?=(\d{3})+$)/g,l=c.split(".");return l[0]=l[0].replace(a,"$1,"),l.join(".")}function percent(c){calc[calc.current]=calc.valB?calc.valA/100*c:c/100,screenVal(calc[calc.current])}function reset(c){calc.valA=c,calc.valB="",calc.current="valA"}const OPS={plus:function(c,a){return c+a},minus:function(c,a){return c-a},multiply:function(c,a){return c*a},divide:function(c,a){return c/a}};var calc={operator:"plus",current:"valA",valA:"",valB:"",equalsVal:0};$(".basic-ops").click(function(c){calc.operator=c.target.id,calc.current="valB"}),$(".num-pad").click(function(c){$(".ac-btn").text("C"),updater(c.target.innerText)}),$(".negate-btn").click(function(){calc[calc.current]=negator(String(calc[calc.current]))}),$(".percent-btn").click(function(){percent(calc[calc.current])}),$(".decimal-btn").click(function(){-1===calc[calc.current].indexOf(".")&&updater(".")}),$(".ac-btn").click(function(){clear()}),$(".equals-btn").click(function(){var c;calc.equalsVal?c=equals(calc.valA,calc.equalsVal):(c=equals(calc.valA,calc.valB),calc.equalsVal=calc.valB),screenVal(String(c)),reset(c)});